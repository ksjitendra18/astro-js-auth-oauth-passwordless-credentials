---
const isUserLoggedIn = !!Astro.locals.userId;
---

<header class="relative h-[70px]">
  <div
    class="h-full px-4 md:px-12 mx-auto flex justify-between items-center py-2"
  >
    <a href="/" class="font-bold text-2xl px-3 md:px-0"> Astro Auth</a>
    <nav
      class="mainNav bg-black md:bg-transparent text-white md:text-black z-30 hidden md:flex absolute md:static left-0 top-14 md:top-0 items-center w-full md:w-auto justify-center"
    >
      <ul
        class="flex flex-col md:flex-row py-5 md:py-3 justify-center items-center gap-5"
      >
        <li>
          <a href="/">Home</a>
        </li>
        {
          isUserLoggedIn ? (
            <>
              <li>
                <a href="/dashboard">Dashboard</a>
              </li>

              <li>
                <a href="/account">My Account</a>
              </li>

              <li>
                <a href="/api/auth/logout">Logout</a>
              </li>
            </>
          ) : (
            <li>
              <a href="/login">Login</a>
            </li>
          )
        }
      </ul>
    </nav>
    <div class={`px-3 hamburger  block md:hidden mt-1 cursor-pointer`}>
      <span class="bar block w-[30px] h-[4px] bg-black"></span>
      <span class="bar block w-[30px] mt-1 h-[4px] bg-black"></span>
      <span class="bar block w-[30px] mt-1 h-[4px] bg-black"></span>
    </div>
  </div>
</header>

<script>
  const hamburger = document.querySelector(".hamburger");
  const mainNav = document.querySelector(".mainNav");

  hamburger?.addEventListener("click", () => {
    hamburger.classList.toggle("active");
    mainNav?.classList.toggle("hidden");
    mainNav?.classList.toggle("flex");
  });
</script>

<style>
  .hamburger.active > span.bar:nth-child(2) {
    display: none;
  }
  .hamburger.active > span.bar:nth-child(1) {
    transform: translateY(7px) rotate(45deg);
  }
  .hamburger.active > span.bar:nth-child(3) {
    transform: translateY(-1px) rotate(-45deg);
  }
</style>
